<p>Why is a curly bracket required before the “$divide” in the following? Is it because of the square bracket? Is it because of a mongodb bug?</p>

<p><code class="highlighter-rouge">ruby
red_green_blue_divide_by_100_and_pow = { 
	'$project' =&gt;
	{
		"red_pow" =&gt; { "$pow" =&gt;
		[{"$divide" =&gt; ["$top_colour.red", 255.0]}, 2.2]},
		"green_pow" =&gt; { "$pow" =&gt; [
			{"$divide" =&gt; ["$top_colour.green", 255.0]}, 2.2]},
		"blue_pow" =&gt; { "$pow" =&gt; [
			{"$divide" =&gt; ["$top_colour.blue", 255.0]}, 2.2]}
      }
    }
</code></p>

<p>But not before the “$pow” in the following:</p>

<p><code class="highlighter-rouge">ruby
red_green_blue_float_avg = { 
	'$project' =&gt;
  {
		"_id" =&gt; 0,
    "red_float_avg" =&gt; {
		  "$multiply" =&gt;
	      [255.0, "$pow" =&gt; ["$red_linear_avg", 1.0/2.2]]},
    "green_float_avg" =&gt; {
      "$multiply" =&gt;
	      [255.0, "$pow" =&gt; ["$green_linear_avg", 1.0/2.2]]},
    "blue_float_avg" =&gt; {
		  "$multiply" =&gt;
	      [255.0, "$pow" =&gt; ["$blue_linear_avg", 1.0/2.2]]}
  }
    }
</code></p>

