I"ö&<h2 id="pontifications">Pontifications</h2>

<ul>
  <li>one krazy idea would be to plot number of support questions by hour and day by operating system and send an alert if they vary say by more than plus/minus 20% than the previous day&lt;â€” i did this on a daily basis for Thunderbird back in 2010 for email providers</li>
  <li>Donâ€™t know how I ended up at <a href="https://stackoverflow.com/questions/29357612/plot-labels-at-ends-of-lines">Plot labels from ends of lines on stackoverflow</a>  but from it I learned that the R package <a href="http://directlabels.r-forge.r-project.org/">directlabels</a>  allows you label end of lines in ggplot2</li>
  <li>And <code class="language-plaintext highlighter-rouge">group_by()</code> allows you to group by multiple variables e.g. <code class="language-plaintext highlighter-rouge">group_by(os, week)</code> allows you to group by operating system and week which is how you plot by OS and week</li>
  <li>This allows me to make <a href="http://rolandtanglao.com/2018/09/27/p1-firefox62-operating-system-line-graph-sumo-support-questions-first-3-weeks/">last weekâ€™s FF62 operating system plot</a> more legible by labelling the OS lines individually.</li>
</ul>

<h3 id="code">Code</h3>
<ul>
  <li>From https://github.com/rtanglao/rt-kitsune-api/blob/master/VISUALIZATIONS/01october2018-ff62-operating-system-directlabels.r</li>
</ul>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">directlabels</span><span class="p">)</span><span class="w">
</span><span class="c1"># I found direct labels from this stack overflow thread:</span><span class="w">
</span><span class="c1"># https://stackoverflow.com/questions/29357612/plot-labels-at-ends-of-lines</span><span class="w">
</span><span class="c1"># output:</span><span class="w">
</span><span class="c1"># https://github.com/rtanglao/rt-kitsune-api/blob/master/VISUALIZATIONS/01october2018-ff62-operating-system-directlabels-Rplot13.png</span><span class="w">
</span><span class="n">week1_to_week3_os_tags</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">read_csv</span><span class="p">(</span><span class="w">
    </span><span class="s2">"https://raw.githubusercontent.com/rtanglao/rt-kitsune-api/master/FF62_WEEK1_TO_3/26september2018-week1-week3-weeknumber-tags.csv"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="w">
    </span><span class="n">grepl</span><span class="p">(</span><span class="s2">"^windows-"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
    </span><span class="n">grepl</span><span class="p">(</span><span class="s2">"^mac-os"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
    </span><span class="p">(</span><span class="n">tag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"linux"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">os</span><span class="o">=</span><span class="n">ifelse</span><span class="p">(</span><span class="n">grepl</span><span class="p">(</span><span class="s2">"^windows-"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">),</span><span class="w"> </span><span class="s2">"windows"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">os</span><span class="o">=</span><span class="n">ifelse</span><span class="p">(</span><span class="n">grepl</span><span class="p">(</span><span class="s2">"^mac-os"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">),</span><span class="w"> </span><span class="s2">"mac-os"</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">tag</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"windows-active-directory"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">os</span><span class="p">,</span><span class="w"> </span><span class="n">week</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">count</span><span class="p">()</span><span class="w">
</span><span class="n">label_at_end_week1_to_week3_os_line_plot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">week1_to_week3_os_tags</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="w">
    </span><span class="n">x</span><span class="o">=</span><span class="n">week</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">))</span><span class="w">
</span><span class="n">label_at_end_week1_to_week3_os_line_plot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">label_at_end_week1_to_week3_os_line_plot</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">labs</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Firefox 62 Desktop OS 5-25Sep2018'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_discrete</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_dl</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">),</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">dl.trans</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w"> </span><span class="s2">"last.points"</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_dl</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">),</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">dl.trans</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w"> </span><span class="s2">"first.points"</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<h3 id="output">Output</h3>

<p><img src="https://github.com/rtanglao/rt-kitsune-api/raw/master/VISUALIZATIONS/01october2018-ff62-operating-system-directlabels-Rplot13.png" alt="01october2018-ff62-operating-system-directlabels-Rplot13.png" /></p>

:ET